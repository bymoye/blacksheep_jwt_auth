(function(e){function t(t){for(var n,o,i=t[0],c=t[1],l=t[2],p=0,d=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"04f7":function(e,t,a){"use strict";a("2f07")},"06fd":function(e,t,a){},"0c8a":function(e,t,a){"use strict";a("1c7e5")},"11f3":function(e,t,a){"use strict";a("e6e0")},"1b97":function(e,t,a){},"1c5a":function(e,t,a){},"1c7e5":function(e,t,a){},"1e57":function(e,t,a){"use strict";a("1c5a")},"1ff3":function(e,t,a){"use strict";a("41e1")},"22e1":function(e,t,a){},2642:function(e,t,a){},2644:function(e,t,a){},"2bd5":function(e,t,a){},"2f07":function(e,t,a){},"2f12":function(e,t,a){"use strict";a("3622")},"31e4":function(e,t,a){"use strict";a("2644")},3622:function(e,t,a){},"3a99":function(e,t,a){"use strict";a("22e1")},"3c88":function(e,t,a){},"3f26":function(e,t,a){"use strict";a("fb4e")},"41e1":function(e,t,a){},"50ec":function(e,t,a){},"52aa":function(e,t,a){},"5a70":function(e,t,a){},6693:function(e,t,a){},"6b14":function(e,t,a){},"6ebe":function(e,t,a){"use strict";a("7bbd")},7187:function(e,t,a){"use strict";a("d997")},"71b0":function(e,t,a){"use strict";a("dcd6")},"73ec":function(e,t,a){"use strict";a("52aa")},7916:function(e,t,a){"use strict";a("bd78")},"7bbd":function(e,t,a){},"7bdf":function(e,t,a){},"7daf":function(e,t,a){},"803f":function(e,t,a){},"82ab":function(e,t,a){"use strict";a("7daf")},"87ab":function(e,t,a){},"8abc":function(e,t,a){"use strict";a("afad")},"8d11":function(e,t,a){},"8e15":function(e,t,a){"use strict";a("6b14")},"90d4":function(e,t,a){"use strict";a("da4c")},"961e":function(e,t,a){"use strict";a("2bd5")},"995d":function(e,t,a){"use strict";a("adc5")},"9ef7":function(e,t,a){},"9fdf":function(e,t,a){"use strict";a("87ab")},a0e4:function(e,t,a){"use strict";a("3c88")},a420:function(e,t,a){"use strict";a("7bdf")},a661:function(e,t,a){},aa6a:function(e,t,a){"use strict";a("f2b1")},aaf0:function(e,t,a){"use strict";a("adce")},adc5:function(e,t,a){},adce:function(e,t,a){},ae6a:function(e,t,a){"use strict";a("50ec")},afad:function(e,t,a){},b0c7:function(e,t,a){"use strict";a("8d11")},b453:function(e,t,a){"use strict";a("1b97")},bae8:function(e,t,a){"use strict";a("06fd")},bd78:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("4de4"),a("d3b7"),a("a15b"),a("ac1f"),a("1276");var n=a("2b0e"),r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{dark_mode:e.darkMode,light_mode:!e.darkMode},attrs:{id:"app"}},[t("router-view"),t("MessagePopup"),e.showAboutModal?t("AboutModal"):e._e()],1)},s=[],o=a("c7eb"),i=a("1da1"),c=a("bc3a"),l=a.n(c),u=function(){var e=this,t=e._self._c;return t("Modal",{on:{close:e.hideAboutModal}},[t("h1",[e._v(e._s(e.$t("About")))]),t("p",[e._v(e._s(e.$t("Thanks for using Piccolo Admin.")))]),t("p",[e._v(e._s(e.$t("Version"))+" "+e._s(e.piccoloAdminVersion))])])},p=[],d=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"overlay"}},[t("div",{staticClass:"modal opaque"},[t("div",{staticClass:"heading"},[t("h1",[e._v(e._s(e.title))]),t("p",{staticClass:"close"},[t("a",{staticClass:"subtle",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("close")}}},[t("font-awesome-icon",{attrs:{icon:"times"}})],1)])]),e._t("default")],2)])},m=[],f={props:{title:{type:String,default:""}}},h=f,v=(a("fcbe"),a("2877")),w=Object(v["a"])(h,d,m,!1,null,"0a34a582",null),b=w.exports,g={components:{Modal:b},computed:{piccoloAdminVersion:function(){return this.$store.state.metaModule.piccoloAdminVersion}},methods:{hideAboutModal:function(){this.$store.commit("updateShowAboutModal",!1)}}},_=g,y=Object(v["a"])(_,u,p,!1,null,null,null),x=y.exports,N=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.visible?t("div",{class:{error:"error"==e.apiResponseMessage.type},attrs:{id:"message_popup"}},[t("p",{staticClass:"message"},[e._v(e._s(e.message))]),t("p",{staticClass:"close"},[t("a",{staticClass:"subtle",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.visible=!1}}},[t("font-awesome-icon",{attrs:{icon:"times"}})],1)])]):e._e()},O=[],k=n["a"].extend({data:function(){return{visible:!1,timeLastAppeared:0}},computed:{message:function(){return this.apiResponseMessage?this.apiResponseMessage.contents:"-"},apiResponseMessage:function(){return this.$store.state.apiResponseMessage}},methods:{getTime:function(){return(new Date).getTime()}},watch:{visible:function(){this.timeLastAppeared=this.getTime()},apiResponseMessage:function(){var e=this;this.visible=!0;var t=this;setTimeout((function(){var a=e.getTime();a-t.timeLastAppeared>=3e3&&(t.visible=!1)}),3e3)}}}),j=k,S=(a("11f3"),Object(v["a"])(j,N,O,!1,null,null,null)),C=S.exports,R=n["a"].extend({components:{AboutModal:x,MessagePopup:C},computed:{darkMode:function(){return this.$store.state.darkMode},showAboutModal:function(){return this.$store.state.aboutModalModule.showAboutModal}},created:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("darkMode")),null===a&&(a=!1),e.$store.commit("updateDarkMode",a),t.next=5,e.$store.dispatch("fetchMeta");case 5:case"end":return t.stop()}}),t)})))()},beforeCreate:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,l.a.interceptors.response.use((function(e){return e}),(function(e){if(e.response&&401==e.response.status){console.log("Login required");var t=a.$route.path;"/login"!==t&&setTimeout((function(){a.$router.push({name:"login",query:{nextURL:t}})}),0)}return Promise.reject(e)})),l.a.interceptors.response.use((function(e){return e}),(function(e){if(e.response&&405==e.response.status){console.log("Method not allowed");var t={contents:"Method not supported - running in read only mode.",type:"error"};a.$store.commit("updateApiResponseMessage",t)}return Promise.reject(e)})),l.a.interceptors.response.use((function(e){return e}),(function(e){return e.response&&404==e.response.status&&(console.log("Page not found"),alert("Page not found"),a.$router.push({name:"home"})),Promise.reject(e)})),l.a.interceptors.response.use((function(e){return e}),(function(e){if(e.response&&502==e.response.status){console.log("The server can't be reached.");var t={contents:"The server can't be reached - please try later.",type:"error"};a.$store.commit("updateApiResponseMessage",t)}return Promise.reject(e)})),t.next=7,e.$store.dispatch("setupTranslations");case 7:return t.next=9,e.$store.dispatch("fetchUser");case 9:case"end":return t.stop()}}),t)})))()}}),$=R,P=(a("8e15"),Object(v["a"])($,r,s,!1,null,null,null)),D=P.exports,M=a("8c4f"),V=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("DetailViewBase",[e.schema?t("AddRowForm",{attrs:{schema:e.schema,tableName:e.tableName}}):e._e()],1)},A=[],F=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("h1",[e._v(e._s(e.$t("Add"))+" "+e._s(e._f("readable")(e.tableName)))]),e.errors.length>0?t("FormErrors",{attrs:{errors:e.errors}}):e._e(),e.defaults?t("form",{on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[t("RowFormSelect",{attrs:{row:e.defaults,schema:e.schema}}),t("button",[e._v(e._s(e.$t("Create")))])],1):e._e()],1)},T=[],L=a("b85c"),B=(a("ddb0"),function(){var e=this,t=e._self._c;e._self._setupProxy;return e.row?t("div",e._l(e.schema.properties,(function(a,n){return t("div",{key:n},[a.extra.foreign_key?[t("label",[e._v(" "+e._s(a.title)+" "),e.isRequired(String(n))?t("span",{staticClass:"required"},[e._v("*")]):e._e(),a.extra.help_text?t("Tooltip",{attrs:{content:a.extra.help_text}}):e._e(),e.isFilter?e._e():t("router-link",{staticClass:"add",attrs:{to:{name:"addRow",params:{tableName:a.extra.to}},target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:"plus"}})],1),e.isFilter?e._e():t("router-link",{staticClass:"add",attrs:{to:{name:"editRow",params:{tableName:a.extra.to,rowID:e.getKeySelectID(a.title)}},target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:"edit"}})],1)],1),t("KeySearch",{attrs:{fieldName:n,tableName:a.extra.to,rowID:e.getValue(String(n)),readable:e.getValue(n+"_readable"),isNullable:a.nullable}})]:[t("label",[e._v(" "+e._s(a.title)+" "),e.isRequired(String(n))?t("span",{staticClass:"required"},[e._v("*")]):e._e(),a.extra.help_text?t("Tooltip",{attrs:{content:a.extra.help_text}}):e._e()],1),t("InputField",{attrs:{columnName:n,format:a.format,isFilter:e.isFilter,isNullable:a.nullable,required:e.isRequired(String(n)),title:a.title,type:a.type||a.anyOf[0].type,value:e.getValue(String(n)),choices:a.extra.choices,isMediaColumn:e.isMediaColumn(String(n)),isRichText:e.isRichText(String(n))}})]],2)})),0):e._e()}),I=[],U=(a("99af"),a("caad"),a("2532"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"key_search"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedValue,expression:"selectedValue"}],attrs:{autocomplete:"off",placeholder:e.isFilter?"All":"None",type:"text"},domProps:{value:e.selectedValue},on:{focus:function(t){e.showModal=!0},keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||(e.selectedValue=t.target.value)}}}),t("input",{attrs:{type:"hidden",name:e.fieldName},domProps:{value:e.hiddenSelectedValue}}),t("KeySearchModal",{directives:[{name:"show",rawName:"v-show",value:e.showModal,expression:"showModal"}],attrs:{isFilter:e.isFilter,tableName:e.tableName},on:{close:function(t){e.showModal=!1},update:function(t){return e.handleUpdate(t)}}})],1)}),E=[],z=a("2909"),q=function(){var e=this,t=e._self._c;return t("Modal",{attrs:{title:"Select a row from ".concat(e.readableTableName)},on:{close:function(t){return e.$emit("close")}}},[t("div",{staticClass:"input_wrapper"},[t("font-awesome-icon",{attrs:{icon:"search"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],attrs:{autocomplete:"off",placeholder:"Type here to filter",type:"search"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}})],1),t("div",{staticClass:"results"},[t("ul",{staticClass:"results_list"},[e.isFilter?t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.selectResult(null,"")}}},[e._v("All")])]):e._e(),e.isNullable?t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.selectResult(null,"Null")}}},[e._v("None")])]):e._e(),e._l(e.ids,(function(a){return t("li",{key:a[0]},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.selectResult.apply(e,Object(z["a"])(a))}}},[e._v(" "+e._s(a[1])+" ")])])})),e.limitReached?e._e():t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.loadMore.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:"arrow-circle-down"}}),e._v(" Load more")],1)])],2)])])},H=[],K=(a("4fad"),a("fb6a"),a("53ca"));a("d81d"),a("5319"),a("e9c4");function J(e){if(0===e)return"0 seconds";var t=Math.floor(e/604800),a=Math.floor(e/86400%7),n=Math.floor(e%86400/3600),r=Math.floor(e%3600/60),s=Math.floor(e%60),o=t>0?t+(1==t?" week ":" weeks "):"",i=a>0?a+(1==a?" day ":" days "):"",c=n>0?n+(1==n?" hour ":" hours "):"",l=r>0?r+(1==r?" minute ":" minutes "):"",u=s>0?s+(1==s?" second":" seconds"):"";return o+i+c+l+u}function W(e){return e.toLowerCase().split(" ").map((function(e){return e.replace(e[0],e[0].toUpperCase())})).join(" ")}function G(e,t){return 422==t?"object"==Object(K["a"])(e)?e["db_error"]?["Database error: ".concat(e["db_error"])]:e["detail"]?e["detail"].map((function(e){var t=e.loc[e.loc.length-1];return"".concat(t," field - ").concat(e.msg)})):e["custom_form_error"]?[e["custom_form_error"]]:[JSON.stringify(e)]:[e]:405==t?"object"==Object(K["a"])(e)?e["detail"]?[e["detail"]]:[JSON.stringify(e)]:[e]:"object"==Object(K["a"])(e)?[JSON.stringify(e)]:[e]}var Y=5,X={props:{tableName:String,isFilter:{type:Boolean,default:!1},isNullable:{type:Boolean,default:!0}},data:function(){return{ids:[],offset:0,limitReached:!1,searchTerm:"",debounceTimer:null}},components:{Modal:b},computed:{readableTableName:function(){return W(this.tableName.split("_").join(" "))}},methods:{fetchData:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tableName:e.tableName,search:e.searchTerm,limit:Y+1,offset:e.offset},t.next=3,e.$store.dispatch("fetchIds",a);case 3:return n=t.sent,r=Object.entries(n.data),e.limitReached=r.length<=Y,t.abrupt("return",r.slice(0,Y));case 7:case"end":return t.stop()}}),t)})))()},scrollResultsToBottom:function(){setTimeout((function(){var e=document.getElementsByClassName("results_list")[0];e.scrollIntoView(!1)}),0)},loadMore:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.offset+=Y,t.next=3,e.fetchData();case 3:n=t.sent,(a=e.ids).push.apply(a,Object(z["a"])(n)),e.scrollResultsToBottom();case 6:case"end":return t.stop()}}),t)})))()},selectResult:function(e,t){this.$emit("update",{id:e,readable:t})}},watch:{tableName:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.offset=0,t.next=3,e.fetchData();case 3:e.ids=t.sent;case 4:case"end":return t.stop()}}),t)})))()},searchTerm:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.debounceTimer&&clearTimeout(e.debounceTimer),a=e,e.debounceTimer=setTimeout(Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.offset=0,e.next=3,a.fetchData();case 3:a.ids=e.sent;case 4:case"end":return e.stop()}}),e)}))),300);case 3:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.ids=t.sent;case 3:case"end":return t.stop()}}),t)})))()}},Q=X,Z=(a("b0c7"),Object(v["a"])(Q,q,H,!1,null,"ba15fc26",null)),ee=Z.exports,te={props:{fieldName:String,tableName:String,rowID:void 0,readable:void 0,isFilter:{type:Boolean,default:!1},isNullable:{type:Boolean,default:!1}},data:function(){return{ids:[],selectedValue:void 0,hiddenSelectedValue:void 0,showModal:!1}},methods:{handleUpdate:function(e){this.selectedValue=e.readable,this.hiddenSelectedValue=e.id,this.showModal=!1}},components:{KeySearchModal:ee},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedValue=e.readable,e.hiddenSelectedValue=e.rowID;case 2:case"end":return t.stop()}}),t)})))()}},ae=te,ne=Object(v["a"])(ae,U,E,!1,null,null,null),re=ne.exports,se=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.isMediaColumn&&!e.isFilter?[t("div",{staticClass:"media_block"},[t("input",{attrs:{type:"file"},on:{change:function(t){return e.uploadFile(t)}}}),e.localValue&&"array"!=e.type?t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showMedia.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:"eye",title:"View"}})],1):e._e()]),e.showMediaViewer?t("MediaViewer",{attrs:{mediaViewerConfig:e.mediaViewerConfig},on:{close:function(t){e.showMediaViewer=!1}}}):e._e(),e.showLoadingOverlay?t("LoadingOverlay"):e._e()]:e._e(),e.choices?[e.isFilter?t("OperatorField",{attrs:{columnName:e.columnName}}):e._e(),t("ChoiceSelect",{attrs:{choices:e.choices,fieldName:e.columnName,isFilter:e.isFilter,isNullable:e.isNullable,value:e.value}})]:"integer"==e.type?[e.isFilter?t("OperatorField",{attrs:{columnName:e.columnName}}):e._e(),t("input",{attrs:{step:"1",type:"number",name:e.columnName,placeholder:e.placeholder},domProps:{value:e.value}})]:"string"==e.type?["date-time"==e.format?[e.isFilter?t("OperatorField",{attrs:{columnName:e.columnName}}):e._e(),t("flat-pickr",{attrs:{config:{enableTime:!0,disableMobile:"true"},name:e.columnName},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}})]:"text-area"==e.format&&0==e.isFilter?t("div",[e.isRichText?t("vue-editor",{attrs:{name:e.columnName,"editor-toolbar":e.customToolbar},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}}):t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],ref:"textarea",style:{height:e.textareaHeight},attrs:{autocomplete:"off",name:e.columnName,placeholder:e.placeholder},domProps:{value:e.localValue},on:{input:[function(t){t.target.composing||(e.localValue=t.target.value)},e.setTextareaHeight]}}),t("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:e.localValue,expression:"localValue",modifiers:{lazy:!0}}],attrs:{id:"editor",name:e.columnName},domProps:{value:e.localValue},on:{change:function(t){e.localValue=t.target.value}}})],1):"json"==e.format?t("div",[t("textarea",{ref:"textarea",style:{height:e.textareaHeight},attrs:{autocomplete:"off",name:e.columnName},domProps:{value:e.localValue?JSON.stringify(JSON.parse(e.localValue),null,2):null},on:{input:e.setTextareaHeight}})]):t("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{type:"text",name:e.columnName,placeholder:e.placeholder},domProps:{value:e.localValue},on:{input:function(t){t.target.composing||(e.localValue=t.target.value)}}})]:"boolean"==e.type?[t("select",{attrs:{name:e.columnName}},[e.isFilter?t("option",{attrs:{value:"all"},domProps:{selected:"all"==e.value}},[e._v(" All ")]):e._e(),e.isNullable?t("option",{attrs:{value:"null"},domProps:{selected:null==e.value}},[e._v(" Null ")]):e._e(),t("option",{attrs:{value:"true"},domProps:{selected:1==e.value}},[e._v(" True ")]),t("option",{attrs:{value:"false"},domProps:{selected:0==e.value}},[e._v(" False ")])])]:"number"==e.type?["time-delta"==e.format?[e.isFilter?t("OperatorField",{attrs:{columnName:e.columnName}}):e._e(),t("DurationWidget",{attrs:{timedelta:e.localValue},on:{newTimedelta:function(t){return e.updateLocalValue(t)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{type:"hidden",name:e.columnName},domProps:{value:e.localValue},on:{input:function(t){t.target.composing||(e.localValue=t.target.value)}}})]:[e.isFilter?t("OperatorField",{attrs:{columnName:e.columnName}}):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{type:"text",name:e.columnName,placeholder:e.placeholder},domProps:{value:e.localValue},on:{input:function(t){t.target.composing||(e.localValue=t.target.value)}}})]]:"array"==e.type?[t("ArrayWidget",{attrs:{array:e.localValue,enableAddButton:e.isFilter||!e.isMediaColumn,fieldName:e.columnName,isFilter:e.isFilter},on:{updateArray:function(t){e.localValue=t}}}),t("input",{attrs:{type:"hidden",name:e.columnName},domProps:{value:e.localValue?JSON.stringify(e.localValue):null}})]:e._e()],2)},oe=[],ie=a("c38f"),ce=a.n(ie),le=a("5873"),ue=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("ul",{staticClass:"array_items"},[e._l(e.internalArray,(function(a,n){return t("li",{key:n},[t("input",{attrs:{type:e.inputType,id:"choice"},domProps:{value:a},on:{change:function(t){return e.updateArray(t,n)}}}),e.isMediaColumn&&!e.isFilter?t("a",{attrs:{href:"#",value:a},on:{click:function(t){return t.preventDefault(),e.showMedia(n)}}},[t("font-awesome-icon",{attrs:{icon:"eye",title:"View"}})],1):e._e(),t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.removeArrayElement(n)}}},[t("font-awesome-icon",{attrs:{icon:"times",title:"Remove"}})],1)])})),t("li",[e.enableAddButton?t("a",{staticClass:"add",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.addArrayElement.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:"plus",title:"Add"}}),e._v(e._s(e.$t("Add"))+" ")],1):e._e()])],2),e.showMediaViewer?t("MediaViewer",{attrs:{mediaViewerConfig:e.mediaViewerConfig},on:{close:function(t){e.showMediaViewer=!1}}}):e._e()],1)},pe=[],de=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"media_viewer"}},[t("div",{staticClass:"top_bar"},[t("p",{staticClass:"file_key"},[t("span",[e._v("File:")]),e._v(" "+e._s(e.mediaViewerConfig.fileKey)+" ")]),t("p",{staticClass:"close"},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("close")}}},[t("font-awesome-icon",{attrs:{icon:"times"}})],1)])]),e.fileURL?[e.isImage(e.mediaViewerConfig.fileKey)?t("div",{staticClass:"image_container"},[t("img",{attrs:{src:e.fileURL}})]):e.isVideo(e.mediaViewerConfig.fileKey)?t("div",{staticClass:"video_container"},[t("video",{attrs:{controls:"",src:e.fileURL}},[e._v(" Video playback not available ")])]):e.isAudio(e.mediaViewerConfig.fileKey)?t("div",{staticClass:"audio_container"},[t("audio",{attrs:{controls:"",src:e.fileURL}},[e._v(" Audio playback not available ")])]):e.isPDF(e.mediaViewerConfig.fileKey)?t("div",{staticClass:"pdf_container"},[t("iframe",{attrs:{src:e.fileURL}})]):t("div",{staticClass:"no_preview"},[t("p",[t("font-awesome-icon",{attrs:{icon:"file"}}),e._v(" Unable to preview file - download below. ")],1)])]:t("div",{staticClass:"loading_container"},[t("p",[t("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"circle-notch"}}),e._v("Loading ... ")],1)]),t("div",{staticClass:"bottom_bar"},[e.fileURL?t("p",[t("a",{staticClass:"button",attrs:{href:e.fileURL,download:""}},[t("font-awesome-icon",{attrs:{icon:"download"}}),e._v(" Download")],1)]):e._e()])],2)},me=[],fe="./api/",he=["mp3","wav"],ve=["gif","jpeg","jpg","png","svg","tif","webp"],we=["mp4","webm"],be=n["a"].extend({props:{mediaViewerConfig:{type:Object}},data:function(){return{fileURL:null}},methods:{isAudio:function(e){var t=e.split("."),a=t[t.length-1].toLowerCase();return-1!=he.indexOf(a)},isImage:function(e){var t=e.split("."),a=t[t.length-1].toLowerCase();return-1!=ve.indexOf(a)},isPDF:function(e){var t=e.split("."),a=t[t.length-1].toLowerCase();return"pdf"==a.toLowerCase()},isVideo:function(e){var t=e.split("."),a=t[t.length-1].toLowerCase();return-1!=we.indexOf(a)},generateFileURL:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n,r,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.columnName,n=e.tableName,r=e.fileKey,t.next=3,l.a.post("".concat(fe,"media/generate-file-url/"),{column_name:a,table_name:n,file_key:r});case 3:return s=t.sent,t.abrupt("return",s.data["file_url"]);case 5:case"end":return t.stop()}}),t)})))()}},watch:{mediaViewerConfig:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=4;break}return a.next=3,t.generateFileURL(e);case 3:t.fileURL=a.sent;case 4:case"end":return a.stop()}}),a)})))()}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.mediaViewerConfig){t.next=4;break}return t.next=3,e.generateFileURL(e.mediaViewerConfig);case 3:e.fileURL=t.sent;case 4:case"end":return t.stop()}}),t)})))()}}),ge=be,_e=(a("8abc"),Object(v["a"])(ge,de,me,!1,null,null,null)),ye=_e.exports,xe=n["a"].extend({props:{array:{type:Array,default:function(){return[]}},inputType:{type:String,default:"text"},fieldName:{type:String,default:""},enableAddButton:{type:Boolean,default:!0},isFilter:{type:Boolean,default:!0}},components:{MediaViewer:ye},data:function(){return{internalArray:[],showMediaViewer:!1,mediaViewerConfig:null}},computed:{schema:function(){return this.$store.state.schema},currentTableName:function(){return this.$store.state.currentTableName},isMediaColumn:function(){return this.schema.media_columns.includes(this.fieldName)}},methods:{updateArray:function(e,t){this.$set(this.internalArray,t,e.target.value),this.$emit("updateArray",this.internalArray)},addArrayElement:function(){this.internalArray=[].concat(Object(z["a"])(this.internalArray),[""]),this.$emit("updateArray",this.internalArray)},removeArrayElement:function(e){this.$delete(this.internalArray,e),this.$emit("updateArray",this.internalArray)},showMedia:function(e){var t={fileKey:this.internalArray[e],columnName:this.fieldName,tableName:this.currentTableName};this.mediaViewerConfig=t,this.showMediaViewer=!0}},watch:{array:function(){this.internalArray=Object(z["a"])(this.array)}},mounted:function(){this.internalArray=Object(z["a"])(this.array)}}),Ne=xe,Oe=(a("31e4"),Object(v["a"])(Ne,ue,pe,!1,null,"218a0152",null)),ke=Oe.exports,je=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("select",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{name:e.fieldName},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.localValue=t.target.multiple?a:a[0]}}},[e.isFilter?t("option",{attrs:{value:"all"},domProps:{selected:"all"==e.value}},[e._v(" All ")]):e._e(),e.isNullable?t("option",{attrs:{value:"null"},domProps:{selected:null==e.value}},[e._v(" Null ")]):e._e(),e._l(e.choices,(function(a,n){return t("option",{key:n,domProps:{selected:e.value==a.value,value:a.value}},[e._v(" "+e._s(a.display_name)+" ")])}))],2)},Se=[],Ce=n["a"].extend({props:{fieldName:{type:String,default:""},value:{type:void 0,default:void 0},choices:{type:Object,default:function(){return{}}},isNullable:{type:Boolean,default:!1},isFilter:{type:Boolean,default:!1}},data:function(){return{localValue:""}},mounted:function(){this.localValue=this.isFilter?"all":this.value},watch:{value:function(e){this.localValue=e}}}),Re=Ce,$e=Object(v["a"])(Re,je,Se,!1,null,null,null),Pe=$e.exports,De=function(){var e=this,t=e._self._c;return t("div",{staticClass:"timedelta_widget"},[t("div",{staticClass:"segment"},[t("p",[e._v(e._s(e.$t("Weeks")))]),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.weeks,expression:"weeks",modifiers:{number:!0}}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.weeks=t.target.multiple?a:a[0]},e.emitEvent]}},e._l(e.weekRange,(function(a){return t("option",{key:"w"+a},[e._v(" "+e._s(a)+" ")])})),0)]),t("div",{staticClass:"segment"},[t("p",[e._v(e._s(e.$t("Days")))]),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.days,expression:"days",modifiers:{number:!0}}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.days=t.target.multiple?a:a[0]},e.emitEvent]}},e._l(e.dayRange,(function(a){return t("option",{key:"d"+a},[e._v(" "+e._s(a)+" ")])})),0)]),t("div",{staticClass:"segment"},[t("p",[e._v(e._s(e.$t("Hours")))]),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.hours,expression:"hours",modifiers:{number:!0}}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.hours=t.target.multiple?a:a[0]},e.emitEvent]}},e._l(e.hourRange,(function(a){return t("option",{key:"h"+a},[e._v(" "+e._s(a)+" ")])})),0)]),t("div",{staticClass:"segment"},[t("p",[e._v(e._s(e.$t("Minutes")))]),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.minutes,expression:"minutes",modifiers:{number:!0}}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.minutes=t.target.multiple?a:a[0]},e.emitEvent]}},e._l(e.minuteRange,(function(a){return t("option",{key:"m"+a},[e._v(" "+e._s(a)+" ")])})),0)]),t("div",{staticClass:"segment"},[t("p",[e._v(e._s(e.$t("Seconds")))]),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.seconds,expression:"seconds",modifiers:{number:!0}}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.seconds=t.target.multiple?a:a[0]},e.emitEvent]}},e._l(e.secondRange,(function(a){return t("option",{key:"s"+a},[e._v(" "+e._s(a)+" ")])})),0)])])},Me=[],Ve=(a("a9e3"),60),Ae=60*Ve,Fe=24*Ae,Te=7*Fe,Le={props:{timedelta:{default:0,type:Number}},data:function(){return{weekRange:Object(z["a"])(Array(500).keys()),dayRange:Object(z["a"])(Array(7).keys()),hourRange:Object(z["a"])(Array(24).keys()),minuteRange:Object(z["a"])(Array(60).keys()),secondRange:Object(z["a"])(Array(60).keys()),weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0}},methods:{emitEvent:function(){var e=this.seconds+this.minutes*Ve+this.hours*Ae+this.days*Fe+this.weeks*Te;this.$emit("newTimedelta",e)},setupValues:function(e){this.weeks=Math.floor(e/Te),e+=-this.weeks*Te,this.days=Math.floor(e/Fe),e+=-this.days*Fe,this.hours=Math.floor(e/Ae),e+=-this.hours*Ae,this.minutes=Math.floor(e/Ve),e+=-this.minutes*Ve,this.seconds=e}},watch:{timedelta:function(e){this.setupValues(e)}},mounted:function(){this.setupValues(this.timedelta)}},Be=Le,Ie=(a("71b0"),Object(v["a"])(Be,De,Me,!1,null,"e138270e",null)),Ue=Ie.exports,Ee=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"loading_overlay"},[t("p",[t("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"circle-notch"}}),e._v(e._s(e.message)+" ")],1)])},ze=[],qe=n["a"].extend({props:{message:{type:String,default:"Uploading file"}}}),He=qe,Ke=(a("b453"),Object(v["a"])(He,Ee,ze,!1,null,"2244031c",null)),Je=Ke.exports,We=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("select",{attrs:{name:e.columnName+"__operator"}},e._l(e.operators,(function(a){return t("option",{key:a.label,domProps:{selected:"e"==a.value,value:a.value}},[e._v(" "+e._s(a.label)+" ")])})),0)},Ge=[],Ye=n["a"].extend({props:{columnName:{type:String,required:!0}},data:function(){return{operators:[{label:"Equals",value:"e"},{label:"Less Than",value:"lt"},{label:"Less Than or Equal To",value:"lte"},{label:"Greater Than or Equal To",value:"gte"},{label:"Greater Than",value:"gt"}]}}}),Xe=Ye,Qe=Object(v["a"])(Xe,We,Ge,!1,null,null,null),Ze=Qe.exports,et=n["a"].extend({props:{title:{type:String,required:!0},columnName:{type:String,required:!0},type:{type:String,default:"string"},value:{type:void 0,default:void 0},format:{type:String,default:void 0},isFilter:{type:Boolean,default:!0},isNullable:{type:Boolean,default:!1},choices:{type:Object,default:null},isMediaColumn:{type:Boolean,default:!1},isRichText:{type:Boolean,default:!1}},components:{flatPickr:ce.a,ArrayWidget:ke,ChoiceSelect:Pe,DurationWidget:Ue,LoadingOverlay:Je,MediaViewer:ye,OperatorField:Ze,VueEditor:le["a"]},data:function(){return{localValue:void 0,textareaHeight:"50px",showMediaViewer:!1,mediaViewerConfig:null,customToolbar:[["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["link","image","code-block"],[{header:[!1,1,2,3]}]],showLoadingOverlay:!1}},computed:{placeholder:function(){return this.isFilter?"All":""},currentTableName:function(){return this.$store.state.currentTableName}},methods:{setTextareaHeight:function(){var e=this.$refs.textarea;e&&e.scrollHeight>e.clientHeight&&(this.textareaHeight=e.scrollHeight+"px")},updateLocalValue:function(e){this.localValue=e},showMedia:function(){var e={fileKey:this.localValue,columnName:this.columnName,tableName:this.currentTableName};this.mediaViewerConfig=e,this.showMediaViewer=!0},uploadFile:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n,r,s,i,c,u,p,d,m,f;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.target.files[0],n){a.next=3;break}return a.abrupt("return");case 3:return r=new FormData,r.append("table_name",t.currentTableName),r.append("column_name",t.columnName),r.append("file",n),t.showLoadingOverlay=!0,a.prev=8,a.next=11,l.a.post("./api/media/",r,{headers:{"Content-Type":"multipart/form-data"}});case 11:s=a.sent,"array"==t.type?t.localValue?t.localValue.push(s.data.file_key):t.localValue=[s.data.file_key]:t.localValue=s.data.file_key,a.next=22;break;case 15:a.prev=15,a.t0=a["catch"](8),c="The request failed.",u=null===(i=a.t0.response)||void 0===i?void 0:i.status,u&&(c=413==u?"The file is too large.":500==u?"An error happened on the server.":null!==(p=null===(d=a.t0.response)||void 0===d||null===(m=d.data)||void 0===m?void 0:m.detail)&&void 0!==p?p:"Unknown error"),f={contents:c,type:"error"},t.$store.commit("updateApiResponseMessage",f);case 22:e.target.value="",t.showLoadingOverlay=!1;case 24:case"end":return a.stop()}}),a,null,[[8,15]])})))()}},watch:{value:function(){this.localValue=this.value,this.setTextareaHeight()}},mounted:function(){this.localValue=this.value;var e=this;setTimeout((function(){e.setTextareaHeight()}),0)}}),tt=et,at=(a("cfa9"),Object(v["a"])(tt,se,oe,!1,null,"6bd1c09e",null)),nt=at.exports,rt=function(){var e=this,t=e._self._c;return t("span",{staticClass:"tooltip"},[t("a",{attrs:{href:"#",title:"Click for more info"},on:{click:function(t){t.preventDefault(),e.popupVisible?e.hidePopup(t):e.showPopup(t)},blur:function(t){return e.hidePopup()}}},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.popupVisible,expression:"popupVisible"}],staticClass:"popup",style:{top:e.popupTop,bottom:e.popupBottom,right:e.popupRight,left:e.popupLeft,width:e.popupWidth,textAlign:e.textAlign}},[t("span",[e._v(e._s(e.content))])])])},st=[],ot={props:{content:{default:"",type:String}},data:function(){return{popupVisible:!1,popupTop:"auto",popupBottom:"auto",popupLeft:"auto",popupRight:"auto",popupWidth:void 0,textAlign:void 0}},methods:{showPopup:function(e){var t=document.body.scrollHeight,a=document.body.scrollWidth,n=e.pageY,r=e.pageX;r<150?(console.log("Right"),this.popupLeft=r+20+"px",this.popupRight="auto",this.popupWidth=a-r-20+"px",this.textAlign="left"):a-r<150?(console.log("Left"),this.popupLeft="auto",this.popupRight=r-20+"px",this.popupWidth=r-20+"px",this.textAlign="right"):(console.log("Center"),this.popupWidth="300px",this.popupLeft=r-150+"px",this.popupRight="auto",this.textAlign="center"),t-n<300?(console.log("Above"),this.popupBottom=t-n+20+"px",this.popupTop="auto"):(console.log("Below"),this.popupBottom="auto",this.popupTop=n+20+"px"),this.popupVisible=!0},hidePopup:function(){this.popupVisible=!1}},mounted:function(){var e=this;function t(){e.popupVisible=!1}this.onResize=t,window.addEventListener("resize",t)},destroyed:function(){this.onResize&&window.removeEventListener("resize",this.onResize)}},it=ot,ct=(a("a420"),Object(v["a"])(it,rt,st,!1,null,null,null)),lt=ct.exports,ut=n["a"].extend({props:{row:Object,schema:Object,isFilter:{type:Boolean,default:!1}},components:{InputField:nt,KeySearch:re,Tooltip:lt},data:function(){return{keySelectIDs:{},baseIndex:1,windowListener:void 0}},methods:{getValue:function(e){var t=this.row?this.row[e]:void 0;return t},getKeySelectID:function(e){return this.keySelectIDs[e]||this.getValue(e)},keySelectChanged:function(e,t){console.log("".concat(e," = ").concat(t)),n["a"].set(this.keySelectIDs,e,t)},getKey:function(e){return e+this.baseIndex},isRequired:function(e){return!this.isFilter&&-1!=(this.schema.required||[]).indexOf(e)},isMediaColumn:function(e){return this.schema.media_columns.includes(e)},isRichText:function(e){return this.schema.rich_text_columns.includes(e)}},mounted:function(){window.addEventListener("message",t,!1);var e=this;function t(t){t.origin===document.location.origin&&(console.log("Received message"),e.baseIndex=e.baseIndex+1)}this.windowListener=t},destroyed:function(){this.windowListener&&window.removeEventListener("message",this.windowListener)}}),pt=ut,dt=(a("0c8a"),Object(v["a"])(pt,B,I,!1,null,"3eead064",null)),mt=dt.exports,ft=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"errors"},[t("p",[t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),e._v("Error")],1),t("ul",e._l(e.errors,(function(a){return t("li",{key:a},[e._v(e._s(a))])})),0)])},ht=[],vt=n["a"].extend({props:{errors:{type:Array,default:function(){return[]}}}}),wt=vt,bt=(a("995d"),Object(v["a"])(wt,ft,ht,!1,null,"3e182eea",null)),gt=bt.exports,_t=n["a"].extend({props:{tableName:String,schema:Object},components:{RowFormSelect:mt,FormErrors:gt},data:function(){return{defaults:{},errors:[]}},methods:{submitForm:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n,r,s,i,c,l,u,p,d,m;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log("I was pressed"),n=new FormData(e.target),r={},s=Object(L["a"])(n.entries());try{for(s.s();!(i=s.n()).done;)u=i.value,p=u[0],d=u[1],"null"==d?d=null:"array"==t.schema.properties[p].type?d=JSON.parse(d):("date-time"==(null===(c=t.schema)||void 0===c?void 0:c.properties[p].format)&&""==d||1==(null===(l=t.schema)||void 0===l?void 0:l.properties[p].extra.foreign_key)&&""==d)&&(d=null),r[p]=d}catch(o){s.e(o)}finally{s.f()}return a.prev=5,a.next=8,t.$store.dispatch("createRow",{tableName:t.tableName,data:r});case 8:a.next=16;break;case 10:return a.prev=10,a.t0=a["catch"](5),t.errors=G(a.t0.response.data,a.t0.response.status),m={contents:"The form has errors.",type:"error"},t.$store.commit("updateApiResponseMessage",m),a.abrupt("return");case 16:t.errors=[],m={contents:"Successfully added row",type:"success"},t.$store.commit("updateApiResponseMessage",m),t.$emit("addedRow"),t.$emit("close"),opener&&opener.postMessage("edited row",document.location.origin);case 22:case"end":return a.stop()}}),a,null,[[5,10]])})))()}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getNew",e.tableName);case 2:a=t.sent,e.defaults=a.data;case 4:case"end":return t.stop()}}),t)})))()}}),yt=_t,xt=(a("90d4"),Object(v["a"])(yt,F,T,!1,null,"4d69164a",null)),Nt=xt.exports,Ot=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("NavBar",{attrs:{username:e.username,siteName:e.siteName}}),t("div",{staticClass:"inner"},[t("BackButton"),e._t("default")],2)],1)},kt=[],jt=function(){var e=this,t=e._self._c;return t("p",[e.showBackButton?t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[t("font-awesome-icon",{attrs:{icon:"angle-left"}}),e._v(e._s(e.$t("Back"))+" ")],1):e._e()])},St=[],Ct={computed:{showBackButton:function(){return window.history.length>1}}},Rt=Ct,$t=(a("2f12"),Object(v["a"])(Rt,jt,St,!1,null,"7f2a658d",null)),Pt=$t.exports,Dt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{attrs:{id:"nav"}},[t("span",{attrs:{id:"burger_menu"}},[t("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showSidebar=!e.showSidebar}}},[e.showSidebar?t("font-awesome-icon",{attrs:{icon:"times"}}):t("font-awesome-icon",{attrs:{icon:"bars"}})],1)]),t("h1",[t("router-link",{attrs:{to:"/"}},[t("font-awesome-icon",{attrs:{icon:"tools"}}),e._v(" "+e._s(e.siteName)+" ")],1)],1),t("ul",[t("li",{staticStyle:{"margin-right":"1rem"}},[t("a",{attrs:{href:"#",title:"Translations"},on:{click:function(t){t.preventDefault(),e.showLanguageDropdown=!e.showLanguageDropdown}}},[t("font-awesome-icon",{attrs:{icon:"language",size:"lg"}})],1),e.showLanguageDropdown?t("NavTranslationsMenu",{on:{closeDropdown:e.closeDropdown}}):e._e()],1),t("li",[t("a",{attrs:{href:"#",id:"user",title:e.username},on:{click:function(t){t.preventDefault(),e.showDropdown=!e.showDropdown}}},[t("font-awesome-icon",{attrs:{icon:"user"}}),e._v(" "+e._s(e.truncatedUsername)+" "),e.showDropdown?t("font-awesome-icon",{attrs:{icon:"angle-up"}}):e._e(),e.showDropdown?e._e():t("font-awesome-icon",{attrs:{icon:"angle-down"}}),e.showDropdown?t("NavDropDownMenu"):e._e()],1)])])]),e.showSidebar?t("SidebarOverlay"):e._e()],1)},Mt=[],Vt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("DropDownMenu",[t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:"sign-out-alt"}}),e._v(e._s(e.$t("Log out"))+" ")],1)]),t("li",[t("router-link",{attrs:{to:{name:"changePassword"}}},[t("font-awesome-icon",{attrs:{icon:"key"}}),e._v(e._s(e.$t("Change password"))+" ")],1)],1),e.darkMode?t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.updateDarkMode(!1)}}},[t("font-awesome-icon",{attrs:{icon:"sun"}}),e._v(e._s(e.$t("Light Mode"))+" ")],1)]):t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.updateDarkMode(!0)}}},[t("font-awesome-icon",{attrs:{icon:"moon"}}),e._v(e._s(e.$t("Dark Mode"))+" ")],1)]),t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showAboutModal.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:"info-circle"}}),e._v(e._s(e.$t("About"))+" Piccolo ")],1)])])},At=[],Ft=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ul",{attrs:{id:"drop_down_menu"}},[e._t("default")],2)},Tt=[],Lt=n["a"].extend({}),Bt=Lt,It=(a("ae6a"),Object(v["a"])(Bt,Ft,Tt,!1,null,"2bd4ab6c",null)),Ut=It.exports,Et=n["a"].extend({components:{DropDownMenu:Ut},computed:{darkMode:function(){return this.$store.state.darkMode}},methods:{updateDarkMode:function(e){this.$store.commit("updateDarkMode",e)},showAboutModal:function(){this.$store.commit("updateShowAboutModal",!0)},logout:function(){return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to logout?")){e.next=12;break}return console.log("Logging out"),e.prev=2,e.next=5,l.a.post("./public/logout/");case 5:location.replace(window.location.pathname),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](2),console.log("Logout failed"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))()}}}),zt=Et,qt=Object(v["a"])(zt,Vt,At,!1,null,"63437e50",null),Ht=qt.exports,Kt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"opaque",attrs:{id:"sidebar_overlay"}},[t("SidebarNav")],1)},Jt=[],Wt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"sidebar"},[t("p",{staticClass:"opaque"},[t("router-link",{staticClass:"subtle",attrs:{to:"/"}},[t("font-awesome-icon",{attrs:{icon:"home"}}),e._v(e._s(e.$t("Home"))+" ")],1)],1),t("p",{staticClass:"opaque",on:{click:function(t){e.isHiddenTables=!e.isHiddenTables}}},[t("font-awesome-icon",{attrs:{icon:"table"}}),e._v(e._s(e.$t("Tables"))+" "),t("span",{staticStyle:{float:"right"}},[e.isHiddenTables?t("font-awesome-icon",{attrs:{icon:"angle-down",title:"Show tables"}}):t("font-awesome-icon",{attrs:{icon:"angle-up",title:"Hide tables"}})],1)],1),t("TableNav",{directives:[{name:"show",rawName:"v-show",value:!e.isHiddenTables,expression:"!isHiddenTables"}]}),e.formConfigs.length>0?t("p",{staticClass:"opaque",on:{click:function(t){e.isHiddenForms=!e.isHiddenForms}}},[t("font-awesome-icon",{attrs:{icon:"cogs"}}),e._v(e._s(e.$t("Forms"))+" "),t("span",{staticStyle:{float:"right"}},[e.isHiddenForms?t("font-awesome-icon",{attrs:{icon:"angle-down",title:"Show forms"}}):t("font-awesome-icon",{attrs:{icon:"angle-up",title:"Hide forms"}})],1)],1):e._e(),t("FormNav",{directives:[{name:"show",rawName:"v-show",value:!e.isHiddenForms,expression:"!isHiddenForms"}]})],1)},Gt=[],Yt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ul",{staticClass:"table_list"},e._l(e.tableNames,(function(a){return t("li",{key:a},[t("router-link",{staticClass:"subtle",class:{active:e.isActive(a)},attrs:{to:{name:"rowListing",params:{tableName:a}}}},[t("font-awesome-icon",{attrs:{icon:"level-up-alt"}}),t("span",[e._v(e._s(e._f("readable")(a)))])],1)],1)})),0)},Xt=[],Qt=n["a"].extend({computed:{tableNames:function(){return this.$store.state.tableNames},currentTableName:function(){return this.$store.state.currentTableName}},methods:{showListing:function(e){this.$store.commit("updateCurrentTablename",e),this.$router.push({name:"rowListing",params:{tableName:e}})},isActive:function(e){return this.currentTableName===e}},filters:{readable:function(e){return e.split("_").join(" ")}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchTableNames");case 2:case"end":return t.stop()}}),t)})))()}}),Zt=Qt,ea=Object(v["a"])(Zt,Yt,Xt,!1,null,null,null),ta=ea.exports,aa=(a("b0c0"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ul",e._l(e.formConfigs,(function(a){return t("li",{key:a.name},[t("router-link",{staticClass:"subtle",attrs:{to:{name:"addForm",params:{formSlug:a.slug}}}},[t("font-awesome-icon",{attrs:{icon:"level-up-alt"}}),t("span",[e._v(e._s(e._f("readable")(a.name)))])],1)],1)})),0)}),na=[],ra=n["a"].extend({computed:{formConfigs:function(){return this.$store.state.formConfigs}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchFormConfigs");case 2:case"end":return t.stop()}}),t)})))()}}),sa=ra,oa=Object(v["a"])(sa,aa,na,!1,null,null,null),ia=oa.exports,ca=n["a"].extend({data:function(){return{isHiddenTables:!1,isHiddenForms:!1}},components:{TableNav:ta,FormNav:ia},computed:{formConfigs:function(){return this.$store.state.formConfigs}}}),la=ca,ua=(a("db94"),Object(v["a"])(la,Wt,Gt,!1,null,null,null)),pa=ua.exports,da={components:{SidebarNav:pa}},ma=da,fa=(a("e034"),Object(v["a"])(ma,Kt,Jt,!1,null,null,null)),ha=fa.exports,va=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("DropDownMenu",e._l(e.translations,(function(a){return t("li",{key:a.language_code},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.updateLanguage(a.language_code)}}},[e.currentLanguageCode==a.language_code?t("font-awesome-icon",{attrs:{icon:"check"}}):e._e(),e._v(" "+e._s(a.language_name)+" "),t("span",{staticClass:"language_code"},[e._v("("+e._s(a.language_code)+")")])],1)])})),0)},wa=[],ba=n["a"].extend({components:{DropDownMenu:Ut},methods:{updateLanguage:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("loadTranslation",e);case 2:t.$emit("closeDropdown",!1);case 3:case"end":return a.stop()}}),a)})))()}},computed:{translations:function(){return this.$store.state.translationsModule.translations},currentLanguageCode:function(){return this.$i18n.locale||"en"}}}),ga=ba,_a=(a("04f7"),Object(v["a"])(ga,va,wa,!1,null,"243523b8",null)),ya=_a.exports,xa=n["a"].extend({props:{username:{type:String,default:"Unknown"},siteName:{type:String,default:"Piccolo Admin"}},data:function(){return{showSidebar:!1,showDropdown:!1,showLanguageDropdown:!1}},computed:{truncatedUsername:function(){var e=this.username;return e.length>20?e.slice(0,16)+"...":e}},components:{SidebarOverlay:ha,NavDropDownMenu:Ht,NavTranslationsMenu:ya},methods:{closeDropdown:function(e){this.showLanguageDropdown=e}}}),Na=xa,Oa=(a("bae8"),Object(v["a"])(Na,Dt,Mt,!1,null,null,null)),ka=Oa.exports,ja=n["a"].extend({components:{BackButton:Pt,NavBar:ka},computed:{username:function(){var e=this.$store.state.user;return e?e.username:"Unknown"},siteName:function(){return this.$store.state.metaModule.siteName}}}),Sa=ja,Ca=(a("7187"),Object(v["a"])(Sa,Ot,kt,!1,null,"883edc22",null)),Ra=Ca.exports,$a=n["a"].extend({props:["tableName"],components:{AddRowForm:Nt,DetailViewBase:Ra},computed:{schema:function(){return this.$store.state.schema}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("updateCurrentTablename",e.tableName),t.next=3,e.$store.dispatch("fetchSchema",e.tableName);case 3:case"end":return t.stop()}}),t)})))()}}),Pa=$a,Da=Object(v["a"])(Pa,V,A,!1,null,"f3682b66",null),Ma=Da.exports,Va=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("DetailViewBase",[t("EditRowForm",{attrs:{rowID:e.rowID,tableName:e.tableName}})],1)},Aa=[],Fa=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.schema?t("div",[t("div",{staticClass:"header"},[t("h1",[e._v(e._s(e.$t("Edit"))+" "+e._s(e._f("readable")(e.tableName)))]),t("p",[t("a",{staticClass:"subtle",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showDropdown=!e.showDropdown}}},[t("font-awesome-icon",{attrs:{icon:"ellipsis-v"}}),e.showDropdown?t("DropDownMenu",[t("li",[t("DeleteButton",{staticClass:"subtle",attrs:{includeTitle:!0},on:{triggered:e.deleteRow}})],1)]):e._e()],1)])]),e.errors.length>0?t("FormErrors",{attrs:{errors:e.errors}}):e._e(),t("form",{on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[t("RowFormSelect",{attrs:{row:e.selectedRow,schema:e.schema}}),t("button",[e._v(e._s(e.$t("Save")))])],1),t("ReferencingTables",{attrs:{rowID:e.rowID,tableName:e.tableName}})],1):e._e()},Ta=[],La=(a("3ca3"),function(){var e=this,t=e._self._c;return e.references.length>0?t("div",[t("p",{staticClass:"referencing_title"},[t("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showReferencing=!e.showReferencing}}},[e.showReferencing?t("span",[t("font-awesome-icon",{attrs:{icon:"angle-down"}}),e._v(e._s(e.$t("Hide referencing tables"))+" ")],1):t("span",[t("font-awesome-icon",{attrs:{icon:"angle-right"}}),e._v(e._s(e.$t("Show referencing tables"))+" ")],1)])]),e.showReferencing?t("ul",{staticClass:"related_tables"},e._l(e.references,(function(a){return t("li",{key:a.tableName+a.columnName},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.clickedReference(a)}}},[t("font-awesome-icon",{attrs:{icon:"external-link-alt"}}),t("span",{staticClass:"table bold"},[e._v(e._s(a.tableName))]),e._v(" "+e._s(e.$t("with a matching"))+" "),t("span",{staticClass:"bold"},[e._v(e._s(a.columnName))])],1)])})),0):e._e()]):e._e()}),Ba=[],Ia={props:{tableName:{type:String},rowID:{type:void 0}},data:function(){return{references:[],showReferencing:!1}},methods:{fetchTableReferences:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchTableReferences",e.tableName);case 2:a=t.sent,e.references=a.data.references;case 4:case"end":return t.stop()}}),t)})))()},clickedReference:function(e){var t=e.columnName,a={};a[t]=this.rowID;var n={name:"rowListing",params:{tableName:e.tableName},query:a},r=this.$router.resolve(n).href;window.open("".concat(document.location.origin).concat(document.location.pathname).concat(r),"_blank")}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchTableReferences();case 2:case"end":return t.stop()}}),t)})))()}},Ua=Ia,Ea=(a("1e57"),Object(v["a"])(Ua,La,Ba,!1,null,"e7c77cec",null)),za=Ea.exports,qa=function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"#",id:"delete",title:"Delete Row"},on:{click:function(t){return t.preventDefault(),e.$emit("triggered")}}},[t("font-awesome-icon",{attrs:{icon:"trash-alt"}}),e.includeTitle?t("span",[e._v(e._s(e.$t("Delete")))]):e._e()],1)},Ha=[],Ka={props:{includeTitle:{type:Boolean,default:!1}}},Ja=Ka,Wa=(a("6ebe"),Object(v["a"])(Ja,qa,Ha,!1,null,"2e7b729a",null)),Ga=Wa.exports,Ya=n["a"].extend({props:{tableName:{type:String},rowID:{type:void 0}},components:{DeleteButton:Ga,DropDownMenu:Ut,RowFormSelect:mt,ReferencingTables:za,FormErrors:gt},data:function(){return{errors:[],showDropdown:!1}},computed:{schema:function(){return this.$store.state.schema},selectedRow:function(){return this.$store.state.selectedRow}},methods:{submitForm:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n,r,s,i,c,l,u,p,d,m,f;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log("Submitting..."),n=new FormData(e.target),r={},s=Object(L["a"])(n.entries());try{for(s.s();!(i=s.n()).done;)u=i.value,p=u[0],d=u[1],"null"==d?d=null:"array"==t.schema.properties[p].type?d=JSON.parse(d):("date-time"==(null===(c=t.schema)||void 0===c?void 0:c.properties[p].format)&&""==d||1==(null===(l=t.schema)||void 0===l?void 0:l.properties[p].extra.foreign_key)&&""==d)&&(d=null),r[p]=d}catch(o){s.e(o)}finally{s.f()}return m={tableName:t.tableName,rowID:t.rowID,data:r},a.prev=6,a.next=9,t.$store.dispatch("updateRow",m);case 9:f={contents:"Successfully saved row",type:"success"},t.$store.commit("updateApiResponseMessage",f),a.next=19;break;case 13:return a.prev=13,a.t0=a["catch"](6),t.errors=G(a.t0.response.data,a.t0.response.status),f={contents:"The form has errors.",type:"error"},t.$store.commit("updateApiResponseMessage",f),a.abrupt("return");case 19:t.errors=[],opener&&opener.postMessage("edited row",document.location.origin);case 21:case"end":return a.stop()}}),a,null,[[6,13]])})))()},deleteRow:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to delete this row?")){t.next=6;break}return a={tableName:e.tableName,rowID:e.rowID},t.next=4,e.$store.dispatch("deleteRow",a);case 4:alert("Successfully deleted row"),e.$router.push({name:"rowListing",params:{tableName:e.tableName}});case 6:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("updateCurrentTablename",e.tableName),t.next=3,e.$store.dispatch("fetchSingleRow",{tableName:e.tableName,rowID:e.rowID});case 3:case"end":return t.stop()}}),t)})))()}},watch:{"$route.params.tableName":function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.fetchData(),this.$store.dispatch("fetchSchema",this.tableName)]);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),"$route.params.rowID":function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.fetchData(),e.$store.dispatch("fetchSchema",e.tableName)]);case 2:case"end":return t.stop()}}),t)})))()}}),Xa=Ya,Qa=(a("3a99"),Object(v["a"])(Xa,Fa,Ta,!1,null,"516cd820",null)),Za=Qa.exports,en=n["a"].extend({props:["tableName","rowID"],components:{EditRowForm:Za,DetailViewBase:Ra}}),tn=en,an=Object(v["a"])(tn,Va,Aa,!1,null,"43d5c64e",null),nn=an.exports,rn=function(){var e=this,t=e._self._c;return t("BaseView",[t("div",{staticClass:"welcome"},[t("h1",[e._v(e._s(e.$t("Welcome to"))+" "+e._s(e.siteName))]),t("p",[e._v(" "+e._s(e.$t("Select a table in the sidebar to get started."))+" ")])])])},sn=[],on=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"base_view"},[t("NavBar",{attrs:{username:e.username,siteName:e.siteName}}),t("div",{staticClass:"wrapper"},[t("div",{staticClass:"sidebar_wrapper"},[t("SidebarNav")],1),e._t("default")],2)],1)},cn=[],ln=n["a"].extend({components:{NavBar:ka,SidebarNav:pa},computed:{username:function(){var e=this.$store.state.user;return e?e.username:"Unknown"},siteName:function(){return this.$store.state.metaModule.siteName}}}),un=ln,pn=(a("82ab"),Object(v["a"])(un,on,cn,!1,null,null,null)),dn=pn.exports,mn={components:{BaseView:dn},computed:{siteName:function(){return this.$store.state.metaModule.siteName}},mounted:function(){this.$store.commit("updateCurrentTablename","")}},fn=mn,hn=(a("aa6a"),Object(v["a"])(fn,rn,sn,!1,null,"63e3b1c8",null)),vn=hn.exports,wn=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"login"}},[t("div",{staticClass:"inner"},[t("h1",[e._v(e._s(e.siteName))]),t("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t("label",[e._v(e._s(e.$t("Username")))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{name:"username",type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("label",[e._v(e._s(e.$t("Password")))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{name:"password",type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("button",[e._v(e._s(e.$t("Login")))])])])])},bn=[],gn={data:function(){return{username:"",password:""}},computed:{siteName:function(){return this.$store.state.metaModule.siteName}},methods:{login:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Logging in"),t.prev=1,t.next=4,l.a.post("./public/login/",{username:e.username,password:e.password});case 4:t.next=12;break;case 6:return t.prev=6,t.t0=t["catch"](1),console.log("Request failed"),console.log(t.t0.response),e.$store.commit("updateApiResponseMessage",{contents:"Problem logging in",type:"error"}),t.abrupt("return");case 12:return t.next=14,e.$store.dispatch("fetchUser");case 14:a=e.$route.query.nextURL,a?e.$router.push({path:a}):e.$router.push({name:"home"});case 16:case"end":return t.stop()}}),t,null,[[1,6]])})))()}}},_n=gn,yn=(a("3f26"),Object(v["a"])(_n,wn,bn,!1,null,null,null)),xn=yn.exports,Nn=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"change_password"}},[t("div",{staticClass:"inner"},[t("BackButton"),t("h1",[e._v(e._s(e.$t("Change password")))]),t("form",{on:{submit:function(t){return t.preventDefault(),e.changePassword.apply(null,arguments)}}},[t("label",[e._v(e._s(e.$t("Current password")))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentPassword,expression:"currentPassword"}],attrs:{name:"current_password",type:"password"},domProps:{value:e.currentPassword},on:{input:function(t){t.target.composing||(e.currentPassword=t.target.value)}}}),t("label",[e._v(e._s(e.$t("New password")))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],attrs:{name:"new_password",type:"password"},domProps:{value:e.newPassword},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}}),t("label",[e._v(e._s(e.$t("New password confirmation")))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmNewPassword,expression:"confirmNewPassword"}],attrs:{name:"confirm_new_password",type:"password"},domProps:{value:e.confirmNewPassword},on:{input:function(t){t.target.composing||(e.confirmNewPassword=t.target.value)}}}),t("button",[e._v(e._s(e.$t("Change password")))])])],1)])},On=[],kn={data:function(){return{currentPassword:"",newPassword:"",confirmNewPassword:""}},components:{BackButton:Pt},methods:{changePassword:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Changing password"),a={current_password:e.currentPassword,new_password:e.newPassword,confirm_new_password:e.confirmNewPassword},t.prev=2,t.next=5,l.a.post("./api/change-password/",a);case 5:e.$store.commit("updateApiResponseMessage",{contents:"Changed password successfully. You will be redirected\n                        to the login page to log in with your new credentials.",type:"success"}),setTimeout((function(){e.$router.push({name:"home"})}),3e3),t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log("Request failed"),console.log(t.t0.response),e.$store.commit("updateApiResponseMessage",{contents:"Error - ".concat(t.t0.response.data.detail),type:"error"});case 14:case"end":return t.stop()}}),t,null,[[2,9]])})))()}}},jn=kn,Sn=(a("7916"),Object(v["a"])(jn,Nn,On,!1,null,null,null)),Cn=Sn.exports,Rn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("BaseView",[void 0!=e.schema?[t("div",{staticClass:"left_column"},[t("div",{staticClass:"title_bar"},[t("div",{staticClass:"title"},[t("h1",[e._v(e._s(e._f("readable")(e.tableName)))]),e.schema.help_text?t("Tooltip",{attrs:{content:e.schema.help_text}}):e._e()],1),t("div",{staticClass:"buttons"},[e.selectedRows.length>0?t("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showUpdateModal=!e.showUpdateModal}}},[t("font-awesome-icon",{attrs:{icon:"arrow-up"}}),t("span",[e._v("Update "+e._s(e.selectedRows.length)+" rows")])],1):e._e(),e.selectedRows.length>0?t("BulkDeleteButton",{attrs:{selected:e.selectedRows.length},on:{triggered:e.deleteRows}}):e._e(),t("router-link",{staticClass:"button",attrs:{to:{name:"addRow",params:{tableName:e.tableName}}},on:{click:function(t){t.preventDefault(),e.showAddRow=!0}}},[t("font-awesome-icon",{attrs:{icon:"plus"}}),t("span",[e._v(e._s(e.$t("Add Row")))])],1),t("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showSortModal=!e.showSortModal}}},[t("font-awesome-icon",{attrs:{icon:"sort"}}),t("span",[e._v(e._s(e.$t("Sort")))])],1),t("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.showFilter=!e.showFilter}}},[t("font-awesome-icon",{attrs:{icon:"filter"}}),t("span",[e._v(" "+e._s(e.showFilter?e.$t("Hide Filters"):e.$t("Show Filters"))+" ")])],1),t("CSVButton",{attrs:{tableName:e.tableName}})],1)]),e.selectedRows.length>0?t("p",{attrs:{id:"selected_count"}},[t("b",[e._v(e._s(e.selectedRows.length))]),e._v(" "+e._s(e.$t("selected result(s) on"))+" "),t("b",[e._v(e._s(e.$t("page"))+" "+e._s(e.currentPageNumber))])]):e._e(),t("div",{staticClass:"table_wrapper"},[t("transition",{attrs:{name:"fade"}},[t("p",{directives:[{name:"show",rawName:"v-show",value:e.loadingStatus,expression:"loadingStatus"}],attrs:{id:"loading_indicator"}},[e._v(" "+e._s(e.$t("Loading"))+" ... ")])]),t("transition",{attrs:{name:"fade"}},[e.loadingStatus||void 0==e.rows?e._e():t("div",[0==e.rows.length?t("p",[e._v(" "+e._s(e.$t("No results found"))+" ")]):[t("table",[t("tr",[t("th",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.allSelected,expression:"allSelected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.allSelected)?e._i(e.allSelected,null)>-1:e.allSelected},on:{change:[function(t){var a=e.allSelected,n=t.target,r=!!n.checked;if(Array.isArray(a)){var s=null,o=e._i(a,s);n.checked?o<0&&(e.allSelected=a.concat([s])):o>-1&&(e.allSelected=a.slice(0,o).concat(a.slice(o+1)))}else e.allSelected=r},e.selectAllRows]}})]),e._l(e.cellNames,(function(a){return t("th",{key:a},[e._v(" "+e._s(e.schema.properties[a]?e.schema.properties[a].title:a)+" ")])})),t("th")],2),e._l(e.rows,(function(a){return t("tr",{key:a[e.pkName]},[t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRows,expression:"selectedRows"}],attrs:{type:"checkbox"},domProps:{value:a[e.pkName],checked:Array.isArray(e.selectedRows)?e._i(e.selectedRows,a[e.pkName])>-1:e.selectedRows},on:{click:e.selectRow,change:function(t){var n=e.selectedRows,r=t.target,s=!!r.checked;if(Array.isArray(n)){var o=a[e.pkName],i=e._i(n,o);r.checked?i<0&&(e.selectedRows=n.concat([o])):i>-1&&(e.selectedRows=n.slice(0,i).concat(n.slice(i+1)))}else e.selectedRows=s}}})]),e._l(e.cellNames,(function(n){return t("td",{key:n},[n==e.pkName?t("span",{staticClass:"link"},[t("router-link",{attrs:{to:{name:"editRow",params:{tableName:e.tableName,rowID:a[n]}}}},[e._v(e._s(a[n]))])],1):e.choicesLookup[n]?t("span",[e._v(" "+e._s(e.choicesLookup[n][a[n]])+" ")]):e.isForeignKey(n)&null!==a[n]?t("span",{staticClass:"link"},[t("router-link",{attrs:{to:{name:"editRow",params:{tableName:e.getTableName(n),rowID:a[n]}}}},[e._v(e._s(a[n+"_readable"]))])],1):e.isBoolean(n)?t("span",{staticClass:"boolean"},[!0===a[n]?t("font-awesome-icon",{staticClass:"correct",attrs:{icon:"check"}}):t("font-awesome-icon",{staticClass:"incorrect",attrs:{icon:"times"}})],1):e.isInterval(n)?t("span",[e._v(" "+e._s(e._f("humanReadable")(a[n]))+" ")]):e.isJSON(n)?t("span",[t("pre",[e._v(e._s(e._f("abbreviate")(e._f("formatJSON")(a[n]))))])]):e.isMediaColumn(n)?t("span",[e.isArray(n)?e._l(a[n],(function(a){return t("a",{key:a,staticStyle:{display:"block"},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showMedia(a,n)}}},[e._v(e._s(e._f("abbreviate")(a))+" ")])})):[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showMedia(a[n],n)}}},[e._v(e._s(e._f("abbreviate")(a[n]))+" ")])]],2):t("span",[e._v(e._s(e._f("abbreviate")(a[n])))])])})),t("td",[t("span",{staticStyle:{position:"relative",display:"block","text-align":"right"}},[t("a",{staticClass:"subtle",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.visibleDropdown=e.visibleDropdown?void 0:a[e.pkName]}}},[t("font-awesome-icon",{attrs:{icon:"ellipsis-v"}})],1),e.visibleDropdown==a[e.pkName]?t("DropDownMenu",[t("li",[t("router-link",{staticClass:"subtle",attrs:{to:{name:"editRow",params:{tableName:e.tableName,rowID:a[e.pkName]}},title:"Edit Row"}},[t("font-awesome-icon",{attrs:{icon:"edit"}}),e._v(e._s(e.$t("Edit"))+" ")],1)],1),t("li",[t("DeleteButton",{staticClass:"subtle delete",attrs:{includeTitle:!0},on:{triggered:function(t){return e.deleteRow(a[e.pkName])}}})],1)]):e._e()],1)])],2)}))],2),t("p",{attrs:{id:"result_count"}},[e._v(" "+e._s(e.$t("Showing"))+" "+e._s(e.rows.length)+" "+e._s(e.$t("of"))+" "+e._s(e.rowCount)+" "+e._s(e.$t("result(s)"))+" ")]),t("div",{staticClass:"pagination_wrapper"},[t("Pagination",{attrs:{tableName:e.tableName}}),t("ChangePageSize")],1)]],2)])],1)]),e.showFilter?t("div",{staticClass:"right_column"},[t("RowFilter",{attrs:{showFilterSidebar:e.showFilter},on:{closeSideBar:e.closeSideBar}})],1):e._e(),e.showAddRow?t("AddRowModal",{attrs:{schema:e.schema,tableName:e.tableName},on:{addedRow:e.fetchRows,close:function(t){e.showAddRow=!1}}}):e._e(),e.showSortModal?t("RowSortModal",{attrs:{schema:e.schema,tableName:e.tableName},on:{close:function(t){e.showSortModal=!1}}}):e._e(),e.showUpdateModal?t("BulkUpdateModal",{attrs:{schema:e.schema,tableName:e.tableName,selectedRows:e.selectedRows},on:{close:function(t){e.showUpdateModal=!1}}}):e._e(),e.showMediaViewer?t("MediaViewer",{attrs:{mediaViewerConfig:e.mediaViewerConfig},on:{close:function(t){e.showMediaViewer=!1}}}):e._e()]:e._e()],2)},$n=[],Pn=a("3835"),Dn=(a("8a79"),a("13d5"),a("07ac"),function(){var e=this,t=e._self._c;return t("Modal",{on:{close:function(t){return e.$emit("close")}}},[t("AddRowForm",{attrs:{schema:e.schema,tableName:e.tableName},on:{addedRow:function(t){return e.$emit("addedRow")},close:function(t){return e.$emit("close")}}})],1)}),Mn=[],Vn={props:{tableName:String,schema:Object},components:{Modal:b,AddRowForm:Nt}},An=Vn,Fn=Object(v["a"])(An,Dn,Mn,!1,null,"b598f334",null),Tn=Fn.exports,Ln=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Modal",{attrs:{title:"Bulk Update"},on:{close:function(t){return e.$emit("close")}}},[e.schema?[t("p",[e._v(e._s(e.$t("Select a column to update")))]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedPropertyName,expression:"selectedPropertyName"}],attrs:{name:"property"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedPropertyName=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:"null",disabled:""}},[e._v(" "+e._s(e.$t("Select a Column"))+" ")]),e._l(e.schema.properties,(function(a,n){return[n!=e.schema.primary_key_name?t("option",{key:n,domProps:{value:n}},[e._v(" "+e._s(a.title)+" ")]):e._e()]}))],2),t("p",{directives:[{name:"show",rawName:"v-show",value:e.selectedPropertyName,expression:"selectedPropertyName"}]},[e._v(e._s(e.$t("New value")))]),e.selectedPropertyName?t("form",{on:{submit:function(t){return t.preventDefault(),e.updateRows(t)}}},[e.selectedProperty.extra.foreign_key?t("KeySearch",{key:e.selectedProperty.title,attrs:{fieldName:e.selectedPropertyName,tableName:e.selectedProperty.extra.to,isNullable:e.selectedProperty.nullable}}):t("InputField",{attrs:{columnName:e.selectedPropertyName,format:e.selectedProperty.format,isFilter:!1,title:e.selectedProperty.title,type:e.selectedProperty.type||e.selectedProperty.anyOf[0].type,choices:e.selectedProperty.extra.choices}}),e.selectedProperty.nullable?t("div",{staticClass:"set_null"},[t("label",[e._v("Set null:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.nullCheckboxState,expression:"nullCheckboxState"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.nullCheckboxState)?e._i(e.nullCheckboxState,null)>-1:e.nullCheckboxState},on:{change:function(t){var a=e.nullCheckboxState,n=t.target,r=!!n.checked;if(Array.isArray(a)){var s=null,o=e._i(a,s);n.checked?o<0&&(e.nullCheckboxState=a.concat([s])):o>-1&&(e.nullCheckboxState=a.slice(0,o).concat(a.slice(o+1)))}else e.nullCheckboxState=r}}})]):e._e(),t("button",{attrs:{disabled:!e.buttonEnabled}},[e._v(e._s(e.$t("Update")))])],1):e._e()]:e._e()],2)},Bn=[],In=n["a"].extend({props:{schema:Object,tableName:String,selectedRows:{type:Array,default:function(){return[]}}},components:{Modal:b,InputField:nt,KeySearch:re},data:function(){return{selectedPropertyName:null,nullCheckboxState:!1,buttonEnabled:!0}},computed:{selectedProperty:function(){return this.schema.properties[this.selectedPropertyName]}},methods:{updateRows:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n,r,s,i,c;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log("Updating ..."),t.buttonEnabled=!1,n=new FormData(e.target),r={},s=null,t.nullCheckboxState||(s=n.get(t.selectedPropertyName),"array"==t.selectedProperty.type&&(s=JSON.parse(s))),r[t.selectedPropertyName]=s,a.prev=7,i=0;case 9:if(!(i<t.selectedRows.length)){a.next=15;break}return a.next=12,t.$store.dispatch("updateRow",{tableName:t.tableName,rowID:t.selectedRows[i],data:r});case 12:i++,a.next=9;break;case 15:return c={contents:"Successfully updated rows",type:"success"},t.$store.commit("updateApiResponseMessage",c),t.$emit("close"),a.next=20,t.$store.dispatch("fetchRows");case 20:a.next=27;break;case 22:a.prev=22,a.t0=a["catch"](7),console.log(a.t0),c={contents:"Invalid column name or value",type:"error"},t.$store.commit("updateApiResponseMessage",c);case 27:t.buttonEnabled=!0;case 28:case"end":return a.stop()}}),a,null,[[7,22]])})))()}}}),Un=In,En=(a("1ff3"),Object(v["a"])(Un,Ln,Bn,!1,null,null,null)),zn=En.exports,qn=function(){var e=this,t=e._self._c;return t("a",{staticClass:"button",attrs:{href:"#",title:"Delete selected Rows"},on:{click:function(t){return t.preventDefault(),e.$emit("triggered")}}},[t("font-awesome-icon",{attrs:{icon:"trash-alt"}}),t("span",[e._v(e._s(e.$t("Delete"))+" "+e._s(e.selected)+" "+e._s(e.$t("rows")))])],1)},Hn=[],Kn={props:{selected:{type:Number,default:0}}},Jn=Kn,Wn=Object(v["a"])(Jn,qn,Hn,!1,null,null,null),Gn=Wn.exports,Yn=function(){var e=this,t=e._self._c;return t("a",{staticClass:"button"},[t("downloadexcel",{attrs:{"before-finish":e.finishDownload,"before-generate":e.startDownload,fetch:e.fetchExportedRows,name:e.tableName+".csv",type:"csv"}},[t("font-awesome-icon",{attrs:{icon:"file-csv"}}),t("span",[e._v(e._s(e.$t("Export CSV")))])],1)],1)},Xn=[],Qn=a("5530"),Zn=a("f2d9"),er={props:["tableName"],components:{downloadexcel:Zn["a"]},methods:{fetchExportedRows:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n,r,s,i,c,u,p,d,m;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$store.state.filterParams,n=e.$store.state.sortBy,n&&(r=n.ascending?"":"-",a["__order"]=r+n.property),t.next=5,l.a.get("api/tables/".concat(e.tableName,"/count/"),{params:a});case 5:s=t.sent,i=s.data,c=Object(Qn["a"])({},a),c["__page"]=i.count,c["__page_size"]=1e3,u=Math.ceil(i.count/c["__page_size"]),p=[],t.prev=12,d=1;case 14:if(!(d<u+1)){t.next=23;break}return c["__page"]=d,t.next=18,l.a.get("api/tables/".concat(e.tableName,"/?__readable=true"),{params:c});case 18:m=t.sent,p.push.apply(p,Object(z["a"])(m.data.rows));case 20:d++,t.next=14;break;case 23:return t.abrupt("return",p);case 26:t.prev=26,t.t0=t["catch"](12),console.log(t.t0.response);case 29:case"end":return t.stop()}}),t,null,[[12,26]])})))()},startDownload:function(){alert("Your data will begin downloading. Large data sets may take a few seconds.")},finishDownload:function(){alert("Your data is ready.")}}},tr=er,ar=(a("aaf0"),Object(v["a"])(tr,Yn,Xn,!1,null,"8c6a485c",null)),nr=ar.exports,rr=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"page_size"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedPageSize,expression:"selectedPageSize"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedPageSize=t.target.multiple?a:a[0]},e.changePageSize]}},e._l(e.pageOptions,(function(a){return t("option",{key:a,attrs:{label:"".concat(a," per page")}},[e._v(" "+e._s(a)+" ")])})),0)])},sr=[],or={data:function(){return{selectedPageSize:15,pageOptions:[5,15,30,50,100]}},methods:{changePageSize:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("updatePageSize",e.selectedPageSize),e.$store.commit("updateCurrentPageNumber",1),t.next=4,e.$store.dispatch("fetchRows");case 4:case"end":return t.stop()}}),t)})))()}},computed:{pageSize:function(){return this.$store.state.pageSize}},watch:{pageSize:function(){this.selectedPageSize=this.pageSize}},mounted:function(){this.selectedPageSize=this.pageSize}},ir=or,cr=(a("efff"),Object(v["a"])(ir,rr,sr,!1,null,"29cdf581",null)),lr=cr.exports,ur=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"pagination"}},[e.pageCount<20?t("ul",{staticClass:"pages"},e._l(e.pageCount,(function(a){return t("li",{key:a},[t("a",{staticClass:"subtle",class:{active:a===e.currentPageNumber},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.changePage(a)}}},[e._v(e._s(a))])])})),0):t("div",{staticClass:"page_select"},[t("label",[e._v(e._s(e.$t("Go to page")))]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.pageDropdownValue,expression:"pageDropdownValue"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.pageDropdownValue=t.target.multiple?a:a[0]}}},e._l(e.pageCount,(function(a){return t("option",{key:a},[e._v(e._s(a))])})),0)])])},pr=[],dr={props:{tableName:String},data:function(){return{pageDropdownValue:0}},computed:{rowCount:function(){return this.$store.state.rowCount||0},pageSize:function(){return this.$store.state.pageSize||1},pageCount:function(){var e=Math.ceil(this.rowCount/this.pageSize);return e<1?1:e},currentTableName:function(){return this.$store.state.currentTableName},filterParams:function(){return this.$store.state.filterParams},currentPageNumber:function(){return this.$store.state.currentPageNumber}},methods:{changePage:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.currentPageNumber==e){a.next=5;break}return console.log("Navigating to "+e),t.$store.commit("updateCurrentPageNumber",e),a.next=5,t.$store.dispatch("fetchRows");case 5:case"end":return a.stop()}}),a)})))()}},watch:{pageDropdownValue:function(e){this.changePage(e)}},mounted:function(){this.pageDropdownValue=this.currentPageNumber}},mr=dr,fr=(a("a0e4"),Object(v["a"])(mr,ur,pr,!1,null,"284bee46",null)),hr=fr.exports,vr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"filter_wrapper"},[t("h1",[e._v(e._s(e.$t("Filter")))]),t("a",{staticClass:"button",attrs:{id:"sidebar-close"},on:{click:function(t){return e.closeSideBar()}}},[t("span",[t("font-awesome-icon",{attrs:{icon:"times"}})],1),e._v(e._s(e.$t("Close"))+" ")]),t("form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[t("RowFormSearch",{attrs:{schema:e.schema}}),t("button",[e._v(e._s(e.$t("Apply")))])],1),t("button",{on:{click:function(t){return t.preventDefault(),e.clearFilters.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("Clear filters"))+" ")])])},wr=[],br=(a("159b"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e._l(e.schema.properties,(function(a,n){return[e.schema.visible_filter_names.includes(String(n))?t("div",{key:a.title},[a.extra.foreign_key?[t("label",[e._v(" "+e._s(a.title)+" ")]),t("KeySearch",{key:e.getValue(a.title),attrs:{fieldName:n,isFilter:!0,readable:e.getValue(a.title),rowID:e.getKeySelectID(a.title),tableName:a.extra.to,isNullable:a.nullable}})]:"json"!==a.format?[t("label",[e._v(" "+e._s(a.title)+" ")]),t("InputField",{key:a.title,attrs:{columnName:n,choices:a.extra.choices,format:a.format,isFilter:!0,isNullable:a.nullable,required:e.isRequired(String(n)),title:a.title,type:a.type||a.anyOf[0].type,value:e.getValue(a.title)}})]:e._e()],2):e._e()]}))],2)}),gr=[],_r=n["a"].extend({props:{row:Object,schema:Object},components:{InputField:nt,KeySearch:re},methods:{getValue:function(e){var t=this.row?this.row[e.toLowerCase().split(" ").join("_")]:void 0;return t},getKeySelectID:function(e){return this.getValue(e)},isRequired:function(e){return!this.isFilter&&-1!=(this.schema.required||[]).indexOf(e)}}}),yr=_r,xr=Object(v["a"])(yr,br,gr,!1,null,null,null),Nr=xr.exports,Or=n["a"].extend({props:{showFilterSidebar:Boolean},components:{RowFormSearch:Nr},computed:{schema:function(){return this.$store.state.schema}},methods:{closeSideBar:function(){this.$emit("closeSideBar",!1)},showSuccess:function(e){var t={contents:e,type:"success"};this.$store.commit("updateApiResponseMessage",t)},submitForm:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n,r,s,i,c,l,u,p;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=new FormData(e.target),r={},s=Object(L["a"])(n.entries());try{for(s.s();!(i=s.n()).done;)c=i.value,l=c[0],u=c[1],u&&"all"!=u&&("array"==(null===(p=t.schema.properties[l])||void 0===p?void 0:p.type)&&(u=JSON.parse(u).filter((function(e){return e})),u=Array.isArray(u)?u.filter((function(e){return e})):u),r[l]=u)}catch(o){s.e(o)}finally{s.f()}return t.$store.commit("updateFilterParams",r),t.$store.commit("updateCurrentPageNumber",1),a.prev=6,a.next=9,t.$store.dispatch("fetchRows");case 9:a.next=14;break;case 11:return a.prev=11,a.t0=a["catch"](6),a.abrupt("return");case 14:t.showSuccess("Successfully applied filter");case 15:case"end":return a.stop()}}),a,null,[[6,11]])})))()},clearFilters:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Clearing ..."),a=e.$refs.form,Object(z["a"])(a.elements).forEach((function(e){"hidden"==e.type&&(e.value="")})),a.reset(),e.$store.commit("updateFilterParams",{}),e.$store.commit("updateCurrentPageNumber",1),t.prev=6,t.next=9,e.$store.dispatch("fetchRows");case 9:t.next=14;break;case 11:return t.prev=11,t.t0=t["catch"](6),t.abrupt("return");case 14:e.showSuccess("Successfully cleared filters");case 15:case"end":return t.stop()}}),t,null,[[6,11]])})))()}}}),kr=Or,jr=(a("73ec"),Object(v["a"])(kr,vr,wr,!1,null,"c5834dba",null)),Sr=jr.exports,Cr=function(){var e=this,t=e._self._c;return t("Modal",{on:{close:function(t){return e.$emit("close")}}},[e.schema?[t("p",[e._v(e._s(e.$t("Sort by"))+":")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.propertyName,expression:"propertyName"}],attrs:{name:"property"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.propertyName=t.target.multiple?a:a[0]}}},[t("option",{domProps:{value:e.schema.primary_key_name}},[e._v(" "+e._s(e.schema.primary_key_name)+" ")]),e._l(e.schema.properties,(function(a,n){return t("option",{key:n,domProps:{value:n}},[e._v(" "+e._s(n)+" ")])}))],2),t("select",{directives:[{name:"model",rawName:"v-model",value:e.ascending,expression:"ascending"}],attrs:{name:"ordering"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.ascending=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:"ascending"}},[e._v(e._s(e.$t("Ascending")))]),t("option",{attrs:{value:"descending"}},[e._v(e._s(e.$t("Descending")))])]),t("button",{on:{click:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[e._v(e._s(e.$t("Sort")))])]:e._e()],2)},Rr=[],$r={props:{schema:Object,tableName:String},data:function(){return{ascending:"descending",propertyName:this.schema.primary_key_name}},components:{Modal:b},methods:{save:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={property:e.propertyName,ascending:"ascending"==e.ascending},e.$store.commit("updateSortBy",a),t.next=4,e.$store.dispatch("fetchRows");case 4:e.$emit("close");case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this.$store.state.sortBy;e&&(this.ascending=e.ascending?"ascending":"descending",this.propertyName=e.property)}},Pr=$r,Dr=Object(v["a"])(Pr,Cr,Rr,!1,null,null,null),Mr=Dr.exports,Vr=n["a"].extend({props:["tableName"],data:function(){return{selectedRows:[],allSelected:!1,showAddRow:!1,showFilter:!1,showSortModal:!1,showUpdateModal:!1,visibleDropdown:null,showMediaViewer:!1,mediaViewerConfig:null}},components:{AddRowModal:Tn,BaseView:dn,BulkDeleteButton:Gn,BulkUpdateModal:zn,ChangePageSize:lr,CSVButton:nr,DeleteButton:Ga,DropDownMenu:Ut,MediaViewer:ye,Pagination:hr,RowFilter:Sr,RowSortModal:Mr,Tooltip:lt},computed:{cellNames:function(){var e=this,t=[];for(var a in this.rows[0])a.endsWith("_readable")||t.push(a);var n=t.filter((function(t){return e.schema.visible_column_names.includes(t)}));return n},rows:function(){return this.$store.state.rows},schema:function(){return this.$store.state.schema},rowCount:function(){return this.$store.state.rowCount},currentPageNumber:function(){return this.$store.state.currentPageNumber},loadingStatus:function(){return this.$store.state.loadingStatus},pkName:function(){var e;return(null===(e=this.schema)||void 0===e?void 0:e.primary_key_name)||"id"},choicesLookup:function(){for(var e=this.schema,t={},a=0,n=Object.entries(e.properties);a<n.length;a++){var r=Object(Pn["a"])(n[a],2),s=r[0],o=r[1],i=o.extra.choices,c=function(e,t){return e[t.value]=t.display_name,e};t[s]=i?Object.values(i).reduce(c,{}):null}return t}},filters:{abbreviate:function(e){if(null===e)return null;var t=String(e);return t.length>100?t.substring(0,80)+"...":t},humanReadable:function(e){return J(e)},formatJSON:function(e){return JSON.stringify(JSON.parse(e),null,2)}},methods:{isForeignKey:function(e){var t=this.schema.properties[e];return void 0!=t&&t.extra.foreign_key},isBoolean:function(e){return"boolean"==this.schema.properties[e]["type"]},isInterval:function(e){return"time-delta"==this.schema.properties[e]["format"]},isJSON:function(e){return"json"==this.schema.properties[e]["format"]},isArray:function(e){return"array"==this.schema.properties[e]["type"]},isMediaColumn:function(e){return this.schema.media_columns.includes(e)},getTableName:function(e){return this.schema.properties[e].extra.to},closeSideBar:function(e){this.showFilter=e},resetRowCheckbox:function(){this.allSelected=!1,this.selectedRows=[]},selectRow:function(){this.allSelected=!1},selectAllRows:function(){var e=this;this.allSelected?this.selectedRows=this.rows.map((function(t){return t[e.pkName]})):this.selectedRows=[]},showSuccess:function(e){var t={contents:e,type:"success"};this.$store.commit("updateApiResponseMessage",t)},showMedia:function(e,t){var a=this;return Object(i["a"])(Object(o["a"])().mark((function n(){var r;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=a.$store.state.currentTableName,a.mediaViewerConfig={fileKey:e,columnName:t,tableName:r},a.showMediaViewer=!0;case 3:case"end":return n.stop()}}),n)})))()},deleteRow:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!confirm("Are you sure you want to delete row ".concat(e,"?"))){a.next=7;break}return console.log("Deleting!"),a.next=4,t.$store.dispatch("deleteRow",{tableName:t.tableName,rowID:e});case 4:return a.next=6,t.fetchRows();case 6:t.showSuccess("Successfully deleted row");case 7:case"end":return a.stop()}}),a)})))()},deleteRows:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!confirm("Are you sure you want to delete the selected rows?")){t.next=12;break}console.log("Deleting rows!"),a=0;case 3:if(!(a<e.selectedRows.length)){t.next=9;break}return t.next=6,e.$store.dispatch("deleteRow",{tableName:e.tableName,rowID:e.selectedRows[a]});case 6:a++,t.next=3;break;case 9:return t.next=11,e.fetchRows();case 11:e.showSuccess("Successfully deleted rows");case 12:case"end":return t.stop()}}),t)})))()},fetchRows:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchRows");case 2:case"end":return t.stop()}}),t)})))()},fetchSchema:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchSchema",e.tableName);case 2:case"end":return t.stop()}}),t)})))()}},watch:{"$route.params.tableName":function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("reset"),this.$store.commit("updateCurrentTablename",this.tableName),e.next=4,Promise.all([this.fetchRows(),this.fetchSchema()]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),"$route.query":function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("updateFilterParams",this.$router.currentRoute.query),e.next=3,this.fetchRows();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rows:function(){this.resetRowCheckbox()}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("updateCurrentTablename",e.tableName),e.$store.commit("updateFilterParams",e.$router.currentRoute.query),t.next=4,Promise.all([e.fetchRows(),e.fetchSchema()]);case 4:case"end":return t.stop()}}),t)})))()}}),Ar=Vr,Fr=(a("f9d9"),Object(v["a"])(Ar,Rn,$n,!1,null,null,null)),Tr=Fr.exports,Lr=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("DetailViewBase",[e.schema?t("FormAdd",{attrs:{formSlug:e.formSlug,schema:e.schema}}):e._e()],1)},Br=[],Ir=(a("a4d3"),a("e01a"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.formConfig&&!e.successMessage?[t("h1",[e._v(e._s(e.formConfig.name))]),e.formConfig.description?t("p",[e._v(" "+e._s(e.formConfig.description)+" ")]):e._e()]:e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.successMessage,expression:"successMessage"}]},[t("h1",[e._v(e._s(e.$t("Form submitted")))]),t("p",[e._v(e._s(e.successMessage))]),t("ul",[t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.resetForm.apply(null,arguments)}}},[e._v(e._s(e.$t("Use again")))])]),t("li",[t("router-link",{attrs:{to:"/"}},[e._v(e._s(e.$t("Back to home page")))])],1)])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.successMessage,expression:"!successMessage"}]},[e.errors.length>0?t("FormErrors",{attrs:{errors:e.errors}}):e._e(),e.schema?t("form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[t("NewForm",{attrs:{schema:e.schema}}),t("button",[e._v(e._s(e.$t("Submit")))])],1):e._e()],1)],2)}),Ur=[],Er=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",e._l(e.schema.properties,(function(a,n){return t("div",{key:a.title},[t("label",[e._v(e._s(a.title))]),t("InputField",{key:n,attrs:{isFilter:!1,columnName:n,title:a.title,type:a.type||a.anyOf[0].type,value:a.default}})],1)})),0)},zr=[],qr=n["a"].extend({props:{schema:Object},components:{InputField:nt}}),Hr=qr,Kr=(a("9fdf"),Object(v["a"])(Hr,Er,zr,!1,null,"aecd47b0",null)),Jr=Kr.exports,Wr="./api/",Gr=n["a"].extend({props:{formSlug:String,schema:Object},components:{NewForm:Jr,FormErrors:gt},data:function(){return{errors:[],formConfig:void 0,successMessage:null}},watch:{formSlug:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFormConfig();case 2:case"end":return t.stop()}}),t)})))()}},methods:{resetForm:function(){this.$refs.form.reset(),this.successMessage=null,this.errors=[]},fetchFormConfig:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchFormConfig",e.formSlug);case 2:a=t.sent,e.formConfig=a.data;case 4:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n,r,s,i,c,u,p,d,m;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=new FormData(e.target),r={},s=Object(L["a"])(n.entries());try{for(s.s();!(i=s.n()).done;)c=i.value,u=c[0],p=c[1],"null"==p?p=null:"array"==t.schema.properties[u].type&&(p=JSON.parse(p)),r[u]=p}catch(o){s.e(o)}finally{s.f()}return a.prev=4,a.next=7,l.a.post("".concat(Wr,"forms/").concat(t.formSlug,"/"),r);case 7:d=a.sent,a.next=16;break;case 10:return a.prev=10,a.t0=a["catch"](4),m={contents:"The form has errors.",type:"error"},t.$store.commit("updateApiResponseMessage",m),t.errors=G(a.t0.response.data,a.t0.response.status),a.abrupt("return");case 16:t.errors=[],t.successMessage=d.data.custom_form_success||"Successfully submitted form";case 18:case"end":return a.stop()}}),a,null,[[4,10]])})))()}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFormConfig();case 2:case"end":return t.stop()}}),t)})))()}}),Yr=Gr,Xr=(a("961e"),Object(v["a"])(Yr,Ir,Ur,!1,null,"40f23f9e",null)),Qr=Xr.exports,Zr=n["a"].extend({props:["formSlug"],components:{FormAdd:Qr,DetailViewBase:Ra},computed:{schema:function(){return this.$store.state.formSchema}},mounted:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchFormSchema",e.formSlug);case 2:case"end":return t.stop()}}),t)})))()}}),es=Zr,ts=Object(v["a"])(es,Lr,Br,!1,null,"f6a98390",null),as=ts.exports;n["a"].use(M["a"]);var ns=new M["a"]({mode:"hash",base:"",routes:[{path:"/",name:"home",component:vn},{path:"/login/",name:"login",component:xn},{path:"/change-password/",name:"changePassword",component:Cn,props:!0},{path:"/forms/:formSlug/",name:"addForm",component:as,props:!0},{path:"/:tableName/",name:"rowListing",component:Tr,props:!0},{path:"/:tableName/add/",name:"addRow",component:Ma,props:!0},{path:"/:tableName/:rowID/",name:"editRow",component:nn,props:!0}]}),rs=(a("841c"),a("2f62")),ss={state:{showAboutModal:!1},mutations:{updateShowAboutModal:function(e,t){e.showAboutModal=t}}},os={state:{siteName:"Piccolo Admin",piccoloAdminVersion:"Unknown"},mutations:{updateSiteName:function(e,t){e.siteName=t},updatePiccoloAdminVersion:function(e,t){e.piccoloAdminVersion=t}},actions:{fetchMeta:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("./public/meta/");case 2:a=t.sent,e.commit("updateSiteName",a.data.site_name),e.commit("updatePiccoloAdminVersion",a.data.piccolo_admin_version);case 5:case"end":return t.stop()}}),t)})))()}}},is=a("a925");n["a"].use(is["a"]);var cs=new is["a"]({locale:"en",silentTranslationWarn:!0}),ls=cs,us="piccoloAdminDefaultLanguage",ps={getDefaultLanguage:function(){return localStorage.getItem(us)},setDefaultLanguage:function(e){return localStorage.setItem(us,e)}},ds={state:{translations:null},mutations:{updateTranslations:function(e,t){e.translations=t}},actions:{setupTranslations:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n,r,s,i,c,u;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("./public/translations/");case 2:return a=t.sent,n=a.data,e.commit("updateTranslations",n.translations),r=n.translations.map((function(e){return e.language_code.toLowerCase()})),s=null,i=ps.getDefaultLanguage(),i&&-1!=r.indexOf(i)?s=i:"auto"==n.default_language_code?(c=navigator.language.toLowerCase(),-1!=r.indexOf(c)?s=c:(u=c.split("-")[0],-1!=r.indexOf(u)&&(s=u))):s=n.default_language_code,t.next=11,e.dispatch("loadTranslation",s||"en");case 11:case"end":return t.stop()}}),t)})))()},loadTranslation:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("./public/translations/".concat(t,"/"));case 2:a=e.sent,ps.setDefaultLanguage(t),ls.setLocaleMessage(a.data.language_code,a.data.translations),ls.locale=a.data.language_code;case 6:case"end":return e.stop()}}),e)})))()}}};n["a"].use(rs["a"]);var ms="./api/",fs=new rs["a"].Store({modules:{aboutModalModule:ss,metaModule:os,translationsModule:ds},state:{apiResponseMessage:null,currentPageNumber:1,currentTableName:void 0,darkMode:!1,filterParams:{},pageSize:15,rowCount:0,rows:[],schema:void 0,formSchema:void 0,selectedRow:void 0,sortBy:null,tableNames:[],formConfigs:[],user:void 0,loadingStatus:!1},mutations:{updateTableNames:function(e,t){e.tableNames=t},updateFormConfigs:function(e,t){e.formConfigs=t},updateCurrentTablename:function(e,t){e.currentTableName=t},updateRows:function(e,t){e.rows=t},updateSelectedRow:function(e,t){e.selectedRow=t},updateSchema:function(e,t){e.schema=t},updateFormSchema:function(e,t){e.formSchema=t},updateApiResponseMessage:function(e,t){e.apiResponseMessage=t},updateUser:function(e,t){e.user=t},updateSortBy:function(e,t){e.sortBy=t},reset:function(e){e.sortBy=null,e.filterParams={},e.currentPageNumber=1,e.rows=null},updateFilterParams:function(e,t){e.filterParams=t},updateRowCount:function(e,t){e.rowCount=t},updatePageSize:function(e,t){e.pageSize=t},updateCurrentPageNumber:function(e,t){e.currentPageNumber=t},updateDarkMode:function(e,t){e.darkMode=t,localStorage.setItem("darkMode",String(t))},updateLoadingStatus:function(e,t){e.loadingStatus=t}},actions:{fetchFormConfigs:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("".concat(ms,"forms/"));case 2:a=t.sent,e.commit("updateFormConfigs",a.data);case 4:case"end":return t.stop()}}),t)})))()},fetchFormConfig:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("".concat(ms,"forms/").concat(t,"/"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},fetchFormSchema:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,l.a.get("".concat(ms,"forms/").concat(t,"/schema/"));case 2:return n=a.sent,e.commit("updateFormSchema",n.data),a.abrupt("return",n);case 5:case"end":return a.stop()}}),a)})))()},fetchTableNames:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("".concat(ms,"tables/"));case 2:a=t.sent,e.commit("updateTableNames",a.data);case 4:case"end":return t.stop()}}),t)})))()},fetchCount:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n,r,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state.currentTableName,n=e.state.filterParams,t.next=4,l.a.get("".concat(ms,"tables/").concat(a,"/count/"),{params:n});case 4:return r=t.sent,s=r.data,e.commit("updateRowCount",s.count),t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})))()},fetchRows:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a,n,r,s,i,c;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("updateLoadingStatus",!0),a=e.state.filterParams,n=e.state.currentTableName,r=e.state.sortBy,r&&(s=r.ascending?"":"-",a["__order"]=s+r.property),t.next=7,e.dispatch("fetchCount");case 7:return i=t.sent,a["__page_size"]=e.state.pageSize,i.count<a["__page_size"]&&e.commit("updateCurrentPageNumber",1),a["__page"]=e.state.currentPageNumber,t.prev=11,t.next=14,l.a.get("".concat(ms,"tables/").concat(n,"/?__readable=true"),{params:a});case 14:c=t.sent,e.commit("updateRows",c.data.rows),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](11),console.log(t.t0.response),e.commit("updateApiResponseMessage",{contents:"Problem fetching ".concat(n," rows."),type:"error"});case 22:e.commit("updateLoadingStatus",!1);case 23:case"end":return t.stop()}}),t,null,[[11,18]])})))()},fetchTableReferences:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("".concat(ms,"tables/").concat(t,"/references/"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},fetchIds:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},t.search&&(a["search"]=t.search),t.limit&&(a["limit"]=t.limit),t.offset&&(a["offset"]=t.offset),e.next=6,l.a.get("".concat(ms,"tables/").concat(t.tableName,"/ids/"),{params:a});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))()},getNew:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("".concat(ms,"tables/").concat(t,"/new/"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},fetchSingleRow:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,l.a.get("".concat(ms,"tables/").concat(t.tableName,"/").concat(t.rowID,"/?__readable=true"));case 2:return n=a.sent,e.commit("updateSelectedRow",n.data),a.abrupt("return",n);case 5:case"end":return a.stop()}}),a)})))()},fetchSchema:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,l.a.get("".concat(ms,"tables/").concat(t,"/schema/"));case 2:return n=a.sent,e.commit("updateSchema",n.data),a.abrupt("return",n);case 5:case"end":return a.stop()}}),a)})))()},createRow:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("".concat(ms,"tables/").concat(t.tableName,"/"),t.data);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},deleteRow:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.delete("".concat(ms,"tables/").concat(t.tableName,"/").concat(t.rowID,"/"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},updateRow:function(e,t){return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.patch("".concat(ms,"tables/").concat(t.tableName,"/").concat(t.rowID,"/"),t.data);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},fetchUser:function(e){return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.get("".concat(ms,"user/"));case 2:a=t.sent,e.commit("updateUser",a.data);case 4:case"end":return t.stop()}}),t)})))()}}}),hs=a("ad3d"),vs=a("ecee"),ws=a("c074");vs["c"].add(ws["a"],ws["b"],ws["c"],ws["d"],ws["e"],ws["f"],ws["g"],ws["h"],ws["i"],ws["j"],ws["k"],ws["l"],ws["m"],ws["p"],ws["n"],ws["o"],ws["q"],ws["r"],ws["s"],ws["t"],ws["u"],ws["v"],ws["w"],ws["x"],ws["y"],ws["z"],ws["A"],ws["B"],ws["C"],ws["D"],ws["E"],ws["F"],ws["G"],ws["H"],ws["I"],ws["J"]),n["a"].component("font-awesome-icon",hs["a"]);var bs=a("d604"),gs=a.n(bs),_s=a("a78e"),ys=a.n(_s);l.a.interceptors.request.use((function(e){if(-1!=["POST","PUT","DELETE","PATCH"].indexOf(e.method.toUpperCase())){var t=ys.a.get("csrftoken");e.headers["X-CSRFToken"]=t}return e})),l.a.defaults.transformResponse=[function(e){if("string"===typeof e)try{e=gs.a.parse(e)}catch(t){}return e}],n["a"].filter("readable",(function(e){return e.split("_").join(" ")})),n["a"].config.productionTip=!1,new n["a"]({i18n:ls,router:ns,store:fs,render:function(e){return e(D)}}).$mount("#app")},cfa9:function(e,t,a){"use strict";a("5a70")},d997:function(e,t,a){},da4c:function(e,t,a){},db94:function(e,t,a){"use strict";a("2642")},dcd6:function(e,t,a){},e034:function(e,t,a){"use strict";a("6693")},e6e0:function(e,t,a){},efff:function(e,t,a){"use strict";a("a661")},f2b1:function(e,t,a){},f9d9:function(e,t,a){"use strict";a("9ef7")},fb4e:function(e,t,a){},fcbe:function(e,t,a){"use strict";a("803f")}});
//# sourceMappingURL=app.77c3ae1e.js.map